# 使用方法
a.img是使用bximage生产的软盘映像。直接在项目目录输入
```
make
```
即可启动虚拟机，可以看到屏幕上显示出一个红色的P，说明我们已经成功进入了保护模式。
![b1fbe87e189e9a8ed74afb846a8bfe84.png](https://i.mjj.rip/2023/06/04/b1fbe87e189e9a8ed74afb846a8bfe84.png)

# 寄存器
让我们记录一下80x86系列芯片有那些常用寄存器，因为在后面的很长一段时间内，我们都将用汇编语言，离不开这些寄存器的名字。

## 8086
### 通用寄存器：
   - AX（累加器）：用于算术和逻辑运算以及存储函数返回值。
   - BX（基址寄存器）：通常用于存储内存地址。
   - CX（计数器）：通常用于循环计数。
   - DX（数据寄存器）：用于算术运算和I/O操作。

### 指针和索引寄存器：
   - SI（源索引）：通常用于源数据传输。
   - DI（目的索引）：通常用于目标数据传输。
   - SP（堆栈指针）：指向栈顶。
   - BP（基址指针）：通常用于指向栈底或存储堆栈帧指针。

### 段寄存器：
   - CS（代码段寄存器）：存储当前代码段的地址。
   - DS（数据段寄存器）：存储当前数据段的地址。
   - SS（堆栈段寄存器）：存储当前堆栈段的地址。
   - ES（附加段寄存器）：通常用于存储额外数据段的地址。

### 标志寄存器：
   - FLAGS（标志寄存器）：包含处理器状态标志，如条件码和控制位。


## 80x86

### 通用寄存器
32位：EAX、EBX、ECX、EDX。
   - EAX（扩展累加器）：用于算术和逻辑运算以及存储函数返回值。
   - EBX（扩展基址寄存器）：通常用于存储内存地址。
   - ECX（扩展计数器）：通常用于循环计数。
   - EDX（扩展数据寄存器）：用于算术运算和I/O操作。
低16位可以当做16位寄存器来使用 去掉前缀E AX、BX...
它们的低16位可以分别当做2个8位寄存器使用 前缀变成 AH、AL、BH、BL...

### 指针和索引寄存器
32位：ESI、EDI、EBP、ESP
   - ESI（扩展源索引）：通常用于源数据传输。
   - EDI（扩展目的索引）：通常用于目标数据传输。
   - ESP（扩展堆栈指针）：指向栈顶。
   - EBP（扩展基址指针）：通常用于指向栈底或存储堆栈帧指针。
### 段寄存器
CS，DS，SS，ES
括号中为396特有
   - CS（代码段寄存器）：存储当前代码段的地址。
   - DS（数据段寄存器）：存储当前数据段的地址。
   - SS（堆栈段寄存器）：存储当前堆栈段的地址。
   - ES（附加段寄存器）：通常用于存储额外数据段的地址。
### 控制寄存器
CR0、CR1、CR2、CR3
   - CR0（控制寄存器0）：包含控制处理器操作的标志位和系统控制位。
   - CR1-CR4（控制寄存器1-4）：保留给未来使用
### 系统地址寄存器
GDTR 48位全局描述符表寄存器

IDTR 48位中断描述符表寄存器

LDTR 16位局部描述符表寄存器

TR 16位任务状态段寄存器
